<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Downloading PDF...</title>

  <!-- html2pdf -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f3f4f6;
      font-family: Arial, sans-serif;
    }

    /* ONLY wrapper â€“ no sizing */
    .resume-print-area {
      background: white;
    }
  </style>
</head>

<body>

  <!-- This must already be A4-sized internally -->
  <div class="resume-print-area" id="resume-to-pdf">
    {% include template_file %}
  </div>

  <script>
    window.onload = function () {
      const element = document.getElementById("resume-to-pdf");

      html2pdf()
        .set({
          filename: "{{ resume.full_name|default:'resume' }}.pdf",
          image: { type: "jpeg", quality: 0.98 },
          html2canvas: {
            scale: 2,
            useCORS: true
          },
          jsPDF: {
            unit: "mm",
            format: "a4",
            orientation: "portrait"
          }
        })
        .from(element)
        .save()
        .then(() => {
          setTimeout(() => {
            window.location.href = "/";
          }, 1500);
        });
    };
  </script>

</body>
</html>
